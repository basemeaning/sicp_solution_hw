#lang racket
(define tolerance 0.00001)

(define (report n x)  (display n)(display "步骤:") (display   x) (newline))

(define (fixed-point f first-guess)
  (define (close-enough? v1 v2)
    (< (abs (- v1 v2)) tolerance))
  (define (try guess step)
    (report step guess)
    (let ((next (f guess )))
      (if (close-enough? guess next)
          next
          (try next (+ step 1)))))
  (try first-guess 1))



(define (average x y) (/ (+ x y) 2))

(fixed-point (lambda (x) (average x (/ (log 1000) (log x)))) 2.0)
(fixed-point (lambda (x) (/ (log 1000) (log x))) 2.0)

1步骤:2.0
2步骤:5.9828921423310435
3步骤:4.922168721308343
4步骤:4.628224318195455
5步骤:4.568346513136242
6步骤:4.5577305909237005
7步骤:4.555909809045131
8步骤:4.555599411610624
9步骤:4.5555465521473675
4.555537551999825
1步骤:2.0
2步骤:9.965784284662087
3步骤:3.004472209841214
4步骤:6.279195757507157
5步骤:3.759850702401539
6步骤:5.215843784925895
7步骤:4.182207192401397
8步骤:4.8277650983445906
9步骤:4.387593384662677
10步骤:4.671250085763899
11步骤:4.481403616895052
12步骤:4.6053657460929
13步骤:4.5230849678718865
14步骤:4.577114682047341
15步骤:4.541382480151454
16步骤:4.564903245230833
17步骤:4.549372679303342
18步骤:4.559606491913287
19步骤:4.552853875788271
20步骤:4.557305529748263
21步骤:4.554369064436181
22步骤:4.556305311532999
23步骤:4.555028263573554
24步骤:4.555870396702851
25步骤:4.555315001192079
26步骤:4.5556812635433275
27步骤:4.555439715736846
28步骤:4.555599009998291
29步骤:4.555493957531389
30步骤:4.555563237292884
31步骤:4.555517548417651
32步骤:4.555547679306398
33步骤:4.555527808516254
34步骤:4.555540912917957
4.555532270803653